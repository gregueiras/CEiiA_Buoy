{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Map</title>
    {% block favicon %}
        <link rel="shortcut icon" type="image/png" href="{% static 'favicon-64.png' %}">
        <link rel="icon" type="image/png" sizes="16x16 32x32 64x64" href="{% static 'favicon-64.png' %}">
        <link rel="icon" type="image/png" sizes="196x196" href="{% static 'favicon-192.png' %}">
        <link rel="icon" type="image/png" sizes="160x160" href="{% static 'favicon-160.png' %}">
        <link rel="icon" type="image/png" sizes="96x96" href="{% static 'favicon-96.png' %}">
        <link rel="icon" type="image/png" sizes="64x64" href="{% static 'favicon-64.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon-32.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon-16.png' %}">
        <link rel="apple-touch-icon" href="{% static 'favicon-57.png' %}">
        <link rel="apple-touch-icon" sizes="114x114" href="{% static 'favicon-114.png' %}">
        <link rel="apple-touch-icon" sizes="72x72" href="{% static 'favicon-72.png' %}">
        <link rel="apple-touch-icon" sizes="144x144" href="{% static 'favicon-144.png' %}">
        <link rel="apple-touch-icon" sizes="60x60" href="{% static 'favicon-60.png' %}">
        <link rel="apple-touch-icon" sizes="120x120" href="{% static 'favicon-120.png' %}">
        <link rel="apple-touch-icon" sizes="76x76" href="{% static 'favicon-76.png' %}">
        <link rel="apple-touch-icon" sizes="152x152" href="{% static 'favicon-152.png' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon-180.png' %}">
        <meta name="msapplication-TileColor" content="#FFFFFF">
        <meta name="msapplication-TileImage" content="{% static 'favicon-144.png' %}">
        <meta name="msapplication-config" content="{% static 'browserconfig.xml">' %}   
    {% endblock %}
	<!-- External Stylesheets -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
</head>
<body>
{% include "indexapp/index.html" %}
	<!-- Our web map and content will go here -->
    <div id="map" style="width: 75%; height: 1000px; margin: auto;"></div>
        {% include "indexapp/footer.html" %}

	<!-- Add the Leaflet JavaScript library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
	<script>
    	// Create variable to hold map element, give initial settings to map
    	var map = L.map('map',{ center: [0,0], zoom: 1.1});

    	// Add OpenStreetMap tile layer to map element
		L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a>' }).addTo(map);
		
        // Create an Empty Popup
        var popup = L.popup();
         
        // Write function to set Properties of the Popup
        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }
         
        // Listen for a click event on the Map element
        map.on('click', onMapClick);
		
		
		
        // load GeoJSON from an external file
        $.getJSON("https://geoserver.emodnet-physics.eu/geoserver/emodnet/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=emodnet:PlatformDriftBuoy&maxFeatures=50&outputFormat=application%2Fjson",function(data){
            // add GeoJSON layer to the map once the file is loaded
            L.geoJson(data,{
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.name);
                }
            }).addTo(map);
        });	
    </script>
    
</body>
</html>